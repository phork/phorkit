import { cx } from '@emotion/css';
import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { Stepper } from 'components/Form/Stepper';
import { Looper } from 'components/Looper';
import { Rhythm } from 'components/Rhythm';
import { StateWrapper } from 'docs/helpers/StateWrapper';
import { PageTitle } from 'stories/helpers/PageTitle';
import { ThemeWrapper } from 'stories/helpers/ThemeWrapper';
import scrollbar from 'styles/common/Scrollbar.module.css';
import { ScrollSync } from '../ScrollSync';

<Meta
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
  title="Utilities/ScrollSync"
/>

<PageTitle src="components/ScrollSync" title="ScrollSync" />

### Horizontal scrolling

<Canvas>
  <Story name="Horizontal scrolling">
    <ThemeWrapper withThemeId>
      {({ themeId }) => (
        <StateWrapper initialState={3}>
          {({ state: count, setState: setCount }) => (
            <React.Fragment>
              <Rhythm grouped mb={6}>
                <Stepper
                  transitional
                  label="Number of items"
                  onChange={(event, value) => setCount(value)}
                  style={{ maxWidth: 300 }}
                  value={count}
                />
              </Rhythm>
              <ScrollSync horizontal>
                {makeRefCallback => (
                  <Looper
                    end={count}
                    render={id => (
                      <Rhythm grouped mb={3}>
                        <div
                          className={cx(
                            scrollbar.scrollbar,
                            scrollbar['scrollbar--primary'],
                            scrollbar['scrollbar--small'],
                            scrollbar[`scrollbar--${themeId}`],
                          )}
                          data-id={id}
                          key={id}
                          ref={makeRefCallback(id)}
                          style={{ width: 300, overflow: 'auto', paddingBottom: 6 }}
                        >
                          <div style={{ width: 600 }}>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sed ipsum eget mi lobortis
                            efficitur ut eu ex. Suspendisse at dui lacus. In in velit et augue venenatis efficitur vel
                            non sem. Aliquam volutpat, urna nec efficitur posuere, nisi quam posuere nunc, vel gravida
                            arcu lorem eu ligula. Mauris ultrices posuere sapien, in sodales turpis ornare eget. Donec
                            cursus lobortis libero, eget finibus nisl egestas in. Mauris congue vestibulum velit eget
                            luctus.
                          </div>
                        </div>
                      </Rhythm>
                    )}
                    start={1}
                  />
                )}
              </ScrollSync>
            </React.Fragment>
          )}
        </StateWrapper>
      )}
    </ThemeWrapper>
  </Story>
</Canvas>

### Vertical scrolling

<Canvas>
  <Story name="Vertical scrolling">
    <ThemeWrapper withThemeId>
      {({ themeId }) => (
        <ScrollSync vertical>
          {makeRefCallback => (
            <Looper
              list={['one', 'two', 'three']}
              render={id => (
                <Rhythm grouped mb={3}>
                  <div
                    className={cx(
                      scrollbar.scrollbar,
                      scrollbar['scrollbar--primary'],
                      scrollbar['scrollbar--small'],
                      scrollbar[`scrollbar--${themeId}`],
                    )}
                    key={id}
                    ref={makeRefCallback(id)}
                    style={{ width: 300, height: 100, overflow: 'auto', paddingRight: 6 }}
                  >
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sed ipsum eget mi lobortis efficitur
                    ut eu ex. Suspendisse at dui lacus. In in velit et augue venenatis efficitur vel non sem. Aliquam
                    volutpat, urna nec efficitur posuere, nisi quam posuere nunc, vel gravida arcu lorem eu ligula.
                    Mauris ultrices posuere sapien, in sodales turpis ornare eget. Donec cursus lobortis libero, eget
                    finibus nisl egestas in. Mauris congue vestibulum velit eget luctus.
                  </div>
                </Rhythm>
              )}
            />
          )}
        </ScrollSync>
      )}
    </ThemeWrapper>
  </Story>
</Canvas>

### All scrolling

<Canvas>
  <Story name="All scrolling">
    <ThemeWrapper withThemeId>
      {({ themeId }) => (
        <ScrollSync horizontal vertical>
          {makeRefCallback => (
            <Looper
              list={['one', 'two', 'three']}
              render={id => (
                <Rhythm grouped mb={3}>
                  <div
                    className={cx(
                      scrollbar.scrollbar,
                      scrollbar['scrollbar--primary'],
                      scrollbar['scrollbar--small'],
                      scrollbar[`scrollbar--${themeId}`],
                    )}
                    key={id}
                    ref={makeRefCallback(id)}
                    style={{ height: 80, width: 300, overflow: 'auto', paddingBottom: 6, paddingRight: 6 }}
                  >
                    <div style={{ width: 600 }}>
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sed ipsum eget mi lobortis
                      efficitur ut eu ex. Suspendisse at dui lacus. In in velit et augue venenatis efficitur vel non
                      sem. Aliquam volutpat, urna nec efficitur posuere, nisi quam posuere nunc, vel gravida arcu lorem
                      eu ligula. Mauris ultrices posuere sapien, in sodales turpis ornare eget. Donec cursus lobortis
                      libero, eget finibus nisl egestas in. Mauris congue vestibulum velit eget luctus.
                    </div>
                  </div>
                </Rhythm>
              )}
            />
          )}
        </ScrollSync>
      )}
    </ThemeWrapper>
  </Story>
</Canvas>
