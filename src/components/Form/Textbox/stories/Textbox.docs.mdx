import { ArgsTable, Description, Primary, Stories, Subtitle, PRIMARY_STORY } from '@storybook/addon-docs';
import { SearchIcon } from 'icons/SearchIcon';
import { SpinnerIcon } from 'icons/SpinnerIcon';
import { EmailIcon } from 'icons/internal/EmailIcon';
import { Button } from 'components/Button';
import { Flex } from 'components/Flex';
import { Looper } from 'components/Looper';
import { Rhythm } from 'components/Rhythm';
import { StateWrapper } from 'docs/helpers/StateWrapper';
import { Canvas } from 'stories/helpers/Canvas';
import { PageTitle } from 'stories/helpers/PageTitle';
import { FormComponentDemo } from '../../stories/helpers/FormComponentDemo';
import { NotifiedTextbox } from '../NotifiedTextbox';
import { Textbox } from '../Textbox';
import { textbox as variants } from './helpers/variants';

<PageTitle src="components/Form/Textbox" title="Textbox" />
<Subtitle />
<Description />
<Primary />
<ArgsTable story={PRIMARY_STORY} />
<Stories />

## Examples

### Basic textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Labeled textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Transitional labeled textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox transitional label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Transitional, clearable labeled textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox clearable transitional label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Transitional labeled textbox with icons

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox
            transitional
            iconAfter={<SpinnerIcon size={14} />}
            iconBefore={SearchIcon}
            label="Super fantastic label"
            variant={variant}
          />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Labeled textbox with placeholder

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox label="Super fantastic label" placeholder="Hello world" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Labeled textbox with HTML placeholder

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox label="Super fantastic label" placeholder={<i>Hello world</i>} variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Transitional labeled textbox with HTML value

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <StateWrapper key={variant}>
        {({ state: value, setState: setValue }) => (
          <Rhythm grouped py={3} style={{ maxWidth: 400 }}>
            <Textbox
              alwaysUseFormatting
              clearable
              transitional
              formattedValue={value ? <i>{value}</i> : undefined}
              label="Super fantastic label"
              onChange={(event, value) => setValue(value)}
              value={value}
              variant={variant}
            />
          </Rhythm>
        )}
      </StateWrapper>
    )}
  />
</Canvas>

### Clearable search textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox clearable transitional iconBefore={<SearchIcon />} label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Read only textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox readOnly label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Textbox with focus/blur callbacks

<Canvas>
  <StateWrapper initialState={false}>
    {({ state: isFocused, setState: setFocused }) => (
      <FormComponentDemo property="value" type="textbox">
        <Textbox
          label={isFocused ? 'Focused label' : 'Blurred label'}
          onBlur={() => setFocused(false)}
          onFocus={() => setFocused(true)}
          placeholder="Hello world"
        />
      </FormComponentDemo>
    )}
  </StateWrapper>
</Canvas>

### Disabled textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox disabled label="Super fantastic label" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Danger textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox transitional label="Super fantastic label" validity="danger" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Warning textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox transitional label="Super fantastic label" validity="warning" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Success textbox

<Canvas>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
          <Textbox transitional label="Super fantastic label" validity="success" variant={variant} />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

### Contrast textbox

<Canvas contrast>
  <Looper
    list={variants}
    render={variant => (
      <Rhythm grouped py={3}>
        <FormComponentDemo property="value" type="textbox">
          <Textbox
            clearable
            contrast
            transitional
            iconBefore={<SearchIcon />}
            label="Super fantastic label"
            placeholder="Hello world"
            variant={variant}
          />
        </FormComponentDemo>
      </Rhythm>
    )}
  />
</Canvas>

## Auto complete

<Canvas>
  <React.Fragment>
    <form autoComplete="on" name="autoComplete">
      <Looper
        list={variants}
        render={variant => (
          <Rhythm grouped py={3}>
            <FormComponentDemo property="value" type="textbox">
              <Textbox
                clearable
                transitional
                autoComplete="email"
                iconBefore={EmailIcon}
                label="Email"
                name={`email-${variant}`}
                type="email"
                variant={variant}
              />
            </FormComponentDemo>
          </Rhythm>
        )}
      />
      <Rhythm ml={3} mt={4} pr={3} style={{ maxWidth: 400 }}>
        <Flex justifyContent="flex-end">
          <Button color="primary" shape="brick" type="submit" weight="shaded">
            Submit
          </Button>
        </Flex>
      </Rhythm>
    </form>
  </React.Fragment>
</Canvas>

## Notifications

<Canvas>
  <Looper
    list={['danger', 'warning', 'success', 'primary', 'neutral']}
    render={level => (
      <Looper
        list={variants}
        render={variant => (
          <Rhythm grouped py={3}>
            <FormComponentDemo initialValue="Hello world" property="value" type="textbox">
              <NotifiedTextbox
                clearable
                transitional
                label="Super fantastic label"
                level={level}
                notification={`This is an example ${level} notification.`}
                variant={variant}
              />
            </FormComponentDemo>
          </Rhythm>
        )}
      />
    )}
  />
</Canvas>
