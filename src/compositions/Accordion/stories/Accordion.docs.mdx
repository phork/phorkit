import { ArgsTable, Description, Primary, Stories, Subtitle, PRIMARY_STORY } from '@storybook/addon-docs';
import { TimesIcon } from 'icons/TimesIcon';
import { CheckIcon } from 'icons/internal/CheckIcon';
import { Button, IconButton } from 'components/Button';
import { Flex } from 'components/Flex';
import { Paper } from 'components/Paper';
import { Rhythm } from 'components/Rhythm';
import { Typography } from 'components/Typography';
import { Canvas } from 'stories/helpers/Canvas';
import { PageTitle } from 'stories/helpers/PageTitle';
import { Accordion, AccordionContainer, AccordionList } from '../index';

<PageTitle src="compositions/Accordion" title="Accordion" />
<Subtitle />
<Description />
<Primary />
<ArgsTable story={PRIMARY_STORY} />
<Stories />

### With `children` prop

<Canvas>
  <Accordion
    unstyled
    initialSelected={['second']}
    items={[
      {
        id: 'first',
        label: ({ disabled, focused, selected }) => (
          <Rhythm my={2}>
            <Button
              fullWidth
              align="left"
              as="div"
              color="neutral"
              disabled={disabled}
              focused={focused}
              shape="brick"
              tabIndex={-1}
              weight={selected ? 'shaded' : 'outlined'}
            >
              First
            </Button>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Typography as="h4" color="primary" heading="h4">
            First panel{selected ? ' is selected' : ''}
          </Typography>
        ),
        labelProps: { style: { outline: 'none' } },
      },
      {
        id: 'second',
        label: ({ disabled, focused, selected }) => (
          <Rhythm my={2}>
            <Button
              fullWidth
              align="left"
              as="div"
              color="neutral"
              disabled={disabled}
              focused={focused}
              shape="brick"
              tabIndex={-1}
              weight={selected ? 'shaded' : 'outlined'}
            >
              Second
            </Button>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Typography as="h4" color="primary" heading="h4">
            Second panel{selected ? ' is selected' : ''}
          </Typography>
        ),
        labelProps: { style: { outline: 'none' } },
      },
      {
        id: 'third',
        label: ({ disabled, focused, selected }) => (
          <Rhythm my={2}>
            <Button
              fullWidth
              align="left"
              as="div"
              color="neutral"
              disabled={disabled}
              focused={focused}
              shape="brick"
              tabIndex={-1}
              weight={selected ? 'shaded' : 'outlined'}
            >
              Third
            </Button>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Typography as="h4" color="primary" heading="h4">
            Third panel{selected ? ' is selected' : ''}
          </Typography>
        ),
        labelProps: { style: { outline: 'none', pointerEvents: 'none' } },
        disabled: true,
      },
      {
        id: 'fourth',
        label: ({ disabled, focused, selected }) => (
          <Rhythm my={2}>
            <Button
              fullWidth
              align="left"
              as="div"
              color="neutral"
              disabled={disabled}
              focused={focused}
              shape="brick"
              tabIndex={-1}
              weight={selected ? 'shaded' : 'outlined'}
            >
              Fourth
            </Button>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Typography as="h4" color="primary" heading="h4">
            Fourth panel{selected ? ' is selected' : ''}
          </Typography>
        ),
        labelProps: { style: { outline: 'none' } },
      },
    ]}
    style={{ outline: 'none' }}
  >
    {({ componentId, items, orientation, ref, themeId, style, unstyled }) => (
      <AccordionContainer orientation={orientation} style={{ ...style, border: 'none' }}>
        <AccordionList
          componentId={componentId}
          items={items}
          orientation={orientation}
          ref={ref}
          style={{
            alignItems: 'center',
            display: 'flex',
            flexDirection: orientation === 'vertical' ? 'column' : 'row',
            outline: 'none',
          }}
          themeId={themeId}
          unstyled={unstyled}
        />
      </AccordionContainer>
    )}
  </Accordion>
</Canvas>

### With children buttons

<Canvas>
  <Accordion
    unstyled
    initialSelected={['first']}
    items={[
      {
        id: 'first',
        label: ({ disabled, focused }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper bordered full color={focused ? 'accent' : 'primary'}>
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>First{focused ? ' is focused' : ''}</span>
                <IconButton
                  color={!focused && 'neutral'}
                  contrast={focused}
                  disabled={disabled}
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked first header');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <TimesIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper full bordered={['vertical', 'bottom']} color="primary">
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>First panel{selected ? ' is selected' : ''}</span>
                <IconButton
                  as="div"
                  color="neutral"
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked first panel');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <CheckIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        labelProps: { style: { outline: 'none' } },
      },
      {
        id: 'second',
        label: ({ disabled, focused }) => (
          <Rhythm full pl={5} pr={3} py={3}>
            <Paper bordered full color={focused ? 'accent' : 'primary'}>
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>Second{focused ? ' is focused' : ''}</span>
                <IconButton
                  color={!focused && 'neutral'}
                  contrast={focused}
                  disabled={disabled}
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked second header');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <TimesIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper full bordered={['vertical', 'bottom']} color="primary">
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>Second panel{selected ? ' is selected' : ''}</span>
                <IconButton
                  as="div"
                  color="neutral"
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked second panel');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <CheckIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        labelProps: { style: { outline: 'none' } },
      },
      {
        id: 'third',
        label: ({ disabled, focused }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper bordered full color={focused ? 'accent' : 'primary'}>
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>Third{focused ? ' is focused' : ''}</span>
                <IconButton
                  color={!focused && 'neutral'}
                  contrast={focused}
                  disabled={disabled}
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked third header');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <TimesIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper full bordered={['vertical', 'bottom']} color="primary">
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>Third panel{selected ? ' is selected' : ''}</span>
                <IconButton
                  as="div"
                  color="neutral"
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked third panel');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <CheckIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        labelProps: { style: { outline: 'none' } },
      },
      {
        id: 'fourth',
        label: ({ disabled, focused }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper bordered full color={focused ? 'accent' : 'primary'}>
              <Flex full alignItems="center" direction="row" justifyContent="space-between">
                <span>Fourth{focused ? ' is focused' : ''}</span>
                <IconButton
                  color={!focused && 'neutral'}
                  contrast={focused}
                  disabled={disabled}
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked fourth header');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <TimesIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        content: ({ selected }) => (
          <Rhythm pl={5} pr={3} py={3}>
            <Paper full bordered={['vertical', 'bottom']} color="primary">
              <Flex full alignItems="flex-start" direction="row" justifyContent="space-between">
                <Rhythm grouped mr={2} my={3}>
                  <span>Fourth panel{selected ? ' is selected' : ''}</span>
                  <p>
                    Lorem ipsum dolor sit amet,{' '}
                    <a href="https://phorkit.org" rel="noreferrer" target="_blank">
                      consectetur adipiscing
                    </a>{' '}
                    elit. In molestie nibh quis metus sollicitudin rutrum. Sed condimentum lectus tellus, et sodales
                    justo accumsan non. Praesent et nibh sit amet mi efficitur placerat. Proin at
                    <a href="https://phorkit.org" rel="noreferrer" target="_blank">
                      neque viverra
                    </a>, lobortis sem eu, tempus purus. Etiam placerat iaculis ipsum sed condimentum. Vivamus fringilla
                    vulputate sem id vulputate. Integer euismod malesuada justo, sit amet suscipit turpis gravida non. Nulla
                    sit amet laoreet lorem.
                  </p>
                  <p>
                    Pellentesque ante turpis, molestie ut lectus nec, dapibus porttitor ligula. Pellentesque egestas
                    nisi vitae odio pretium, at{' '}
                    <a href="https://phorkit.org" rel="noreferrer" target="_blank">
                      ultrices dui
                    </a>{' '}
                    mollis. Vestibulum quis pretium dolor. Suspendisse porttitor, ex congue tincidunt facilisis, quam
                    ipsum rhoncus augue, ac luctus lacus lorem vel risus. Integer a ex interdum, egestas dui vitae,
                    maximus sem. Praesent id egestas.
                  </p>
                  <input style={{ height: 28 }} type="text" />
                </Rhythm>
                <IconButton
                  as="div"
                  color="neutral"
                  onClick={event => {
                    event.stopPropagation();
                    console.log('clicked fourth panel');
                  }}
                  shape="square"
                  weight="solid"
                >
                  <CheckIcon scale="small" />
                </IconButton>
              </Flex>
            </Paper>
          </Rhythm>
        ),
        labelProps: { style: { outline: 'none' } },
      },
    ]}
    maxSelect={-1}
    minSelect={0}
  >
    {({ componentId, items, orientation, ref, themeId, style, unstyled }) => (
      <AccordionContainer orientation={orientation} style={{ ...style, border: 'none' }}>
        <AccordionList
          componentId={componentId}
          items={items}
          orientation={orientation}
          ref={ref}
          style={{
            alignItems: 'center',
            display: 'flex',
            flexDirection: orientation === 'vertical' ? 'column' : 'row',
            outline: 'none',
          }}
          themeId={themeId}
          unstyled={unstyled}
        />
      </AccordionContainer>
    )}
  </Accordion>
</Canvas>
